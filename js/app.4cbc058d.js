(function(t){function e(e){for(var r,o,s=e[0],c=e[1],m=e[2],u=0,d=[];u<s.length;u++)o=s[u],n[o]&&d.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,m||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var m=0;m<s.length;m++)e(s[m]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00df":function(t,e,a){},"028a":function(t,e,a){},"028f":function(t,e,a){"use strict";var r=a("c6b2"),n=a.n(r);n.a},"11a5":function(t,e,a){"use strict";var r=a("7e94"),n=a.n(r);n.a},"11da":function(t,e,a){"use strict";var r=a("22de"),n=a.n(r);n.a},"191d":function(t,e,a){"use strict";var r=a("8123"),n=a.n(r);n.a},"22de":function(t,e,a){},"37a1":function(t,e,a){"use strict";var r=a("635f"),n=a.n(r);n.a},5332:function(t,e,a){"use strict";var r=a("b953"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);var r,n,i=a("cebc"),o=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),s=a("2f62"),c=a("2536"),m=a.n(c),l=a("63d6"),u=a.n(l),d=(a("1940"),a("740a"),a("2440"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content h-100"},[a("nav",{staticClass:"navbar navbar-dark bg-dark w-100"},[a("div",{staticClass:"row align-items-center w-100"},[a("div",{staticClass:"col-12 col-sm-2 col-md-2"},[a("NavBrand")],1),a("div",{staticClass:"col-12 col-sm-8 col-md-8"},[a("ItemName",{on:{generate:t.generateArtifact}})],1),a("div",{staticClass:"col-12 col-sm-2 col-md-2 text-right"},[a("a",{staticClass:"btn btn-link text-light btn-sm basic-tour",attrs:{title:"Ficou com dúvidas sobre como utilizar o martelo arcano? Clica aqui ;)"},on:{click:t.startTour}},[a("i",{staticClass:"fa fa-info-circle"}),t._v(" Guia\n        ")])])])]),a("div",{staticClass:"item-generator"},[a("div",{staticClass:"editor"},[a("ItemPreview",{ref:"itemPreview"},[a("ItemOptions",{staticClass:"options-left",attrs:{title:"Propriedades do artefato"}},[a("ItemBackOptions")],1),a("ItemOptions",{staticClass:"options-right",attrs:{title:"Exterior do artefato"}},[a("ItemCoverOptions")],1)],1)],1),a("div",{staticClass:"export-list"},[a("GeneratedItems",{staticClass:"h-100"})],1)]),t._m(0),a("TourGuide")],1)}),p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"credits"},[a("span",[t._v("\n      Criado por\n      "),a("a",{attrs:{href:"https://kacianoghelere.github.io/",target:"_blank"}},[t._v("Kaciano Ghelere")]),t._v("\n      (v1.1.0)\n    ")]),a("span",[t._v("Encontrou alguma ruptura no tecido arcano? Chame o arcanista:\n      "),a("a",{attrs:{href:"mailto:kacianoghelere@gmail.com"}},[t._v("kacianoghelere@gmail.com")])])])}],f=(a("96cf"),a("3b8d")),g=function(t,e){e._c;return e._m(0)},v=[function(t,e){var r=e._c;return r("a",{staticClass:"artifacts-generator navbar-brand m-0"},[r("img",{attrs:{src:a("a7bb"),height:"30",alt:"Forja Mística"}}),e._v("\n  Forja Mística\n")])}],b=a("2877"),h={},C=Object(b["a"])(h,g,v,!0,null,null,null),_=C.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"generated-items"},[a("div",{staticClass:"row align-items-stretch h-100 mx-0"},[a("div",{staticClass:"col-12 col-md-9 col-lg-10 order-1 order-md-0"},[a("div",{staticClass:"d-flex justify-content-between align-items-center border-bottom"},[a("h5",{staticClass:"text-dark my-1 title w-auto"},[t._v("Artefatos criados")]),a("ExportImportItems",{staticClass:"d-inline"})],1),a("GeneratedItemsList",{attrs:{"generated-items":t.generatedItems}})],1),a("div",{staticClass:"col-12 col-md-3 col-lg-2 order-0 order-md-1 border-left bg-white"},[a("div",{staticClass:"h-100 d-flex flex-column justify-content-center align-items-center"},[a("button",{staticClass:"btn btn-dark export-to-pdf",attrs:{type:"button",disabled:!t.hasGeneratedItems},on:{click:t.exportToPdf}},[a("i",{staticClass:"fa fa-file-pdf-o mr-1"}),a("strong",[t._v("Materializar artefatos")])]),t._m(0)])])])])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-muted text-center m-0 mt-1"},[a("small",[t._v("Arquivo em formato .pdf")]),a("br"),a("small",[t._v("Tamanho A4 (Paisagem)")]),a("br"),a("small",[t._v("4 artefatos por folha")])])}],w=a("5935"),I=a("bd86"),O=a("e511"),k=a.n(O),j={exportToPdf:function(t){var e=t.state,a=e.format,r=e.margin,n=e.orientation,i=e.spacing,o=t.getters,s=o.fitsFormatHeight,c=o.fitsFormatWidth,m=o.getImageRealSize,l=o.pageDimensions,u=t.rootState.generatedItems,d=t.rootGetters.hasGeneratedItems;if(d){var p=new k.a({unit:"mm",format:a,orientation:n}),f=r,g=r;p.setFont("helvetica"),p.setFontType("regular"),p.setFontSize(10),p.setTextColor("red");var v=r,b=l.height-r,h=function(){var t="Dicas para obter uma boa impressão: respeite as margens e sempre imprima com 100% do tamanho de impressão. Cada carta mede aproximadamente 63,5mm x 88mm.";p.text(v,b,t)};h();var C=1,_=1;for(var x in u){var y=u[x].image,w=m(y),I=w.width,O=w.height,j=c(f+I);console.log("Imagem ",C++),console.log("positionX + width <= availableWidth",f+I,l.availableWidth,f+I<=l.availableWidth),console.log("positionY + height <= availableHeight",g+O,l.availableHeight,g+O<=l.availableHeight);var E=s(g+O);j||E?!j&&E&&(f=r,g+=O+i):(p.addPage(a,n),_++,h(),f=r,g=r),console.log({page:_,positionX:f,positionY:g}),p.addImage(y.url,"JPEG",f,g,I,O),f+=I+i}var S=(new Date).toISOString();p.save("artefatos_".concat(a,"_").concat(S,".pdf"))}}},E={getField:w["a"],fitsFormat:function(t,e){var a=e.pageDimensions;return function(t,e){return e<=a[t]}},fitsFormatHeight:function(t,e){var a=e.fitsFormat;return function(t){return a("availableHeight",t)}},fitsFormatWidth:function(t,e){var a=e.fitsFormat;return function(t){return a("availableWidth",t)}},getCovertedSize:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=25.4*t/e;return Math.round(10*a)/10}},getImageRealSize:function(t,e){var a=e.getCovertedSize;return function(t){var e=t.width,r=t.height;return{width:a(e),height:a(r)}}},pageDimensions:function(t){var e=t.formats,a=t.format,r=void 0===a?"a4":a,n=t.orientation,i=void 0===n?"landscape":n;return e[r][i]}},S=null,T={updateField:function(t,e){S&&clearTimeout(S),S=setTimeout(function(){return Object(w["c"])(t,e)},100)}},P=["Comum","Incomum","Raro","Muito Raro","Lendário","Artefato","Único"],z=["Anel","Arma","Armadura","Benção","Cajado","Habilidade","Item Maravilhoso","Pergaminho","Poção","Varinha"],N=10,R=function(t,e){return{height:e,width:t,availableHeight:e-2*N,availableWidth:t-2*N}},A=function(t,e){return{portrait:R(t,e),landscape:R(e,t)}},G={a4:A(210,297),a3:A(297,420)},M=["portrait","landscape"],q=[{name:"Miúdo",value:"tiny"},{name:"Pequeno",value:"small"},{name:"Mediano",value:"medium"},{name:"Grande",value:"large"},{name:"Enorme",value:"huge"}],B=[{name:"Mediano",value:"medium"},{name:"Pequeno",value:"small"},{name:"Miúdo",value:"tiny"}],D=5,F={uuid:null,name:"Meu novo artefato",type:z[1],subType:"",rarity:P[0],description:"",effects:"",requiresAttunement:!1,file:null,backgroundColor:"#ffffff",backgroundSize:"cover",backgroundPositionX:50,backgroundPositionY:50,showLevels:!0,textSize:B[0],titleNameSize:q[2]},L={format:"a4",formats:G,margin:N,orientation:"landscape",orientations:M,spacing:D},$={namespaced:!0,actions:j,getters:E,mutations:T,state:L},Z=a("59ad"),H=a.n(Z),U="SET_CALCULATING_ZOOM",V="SET_PREVIEW_ZOOM",X=(r={},Object(I["a"])(r,U,function(t,e){t.isCalculatingZoom=e}),Object(I["a"])(r,V,function(t,e){t.previewZoom=e}),r),W=null,Y={updatePreviewZoom:function(t,e){var a=t.commit,r=e.offsetHeight,n=e.offsetWidth;a(U,!0),W&&clearTimeout(W),W=setTimeout(function(){var t=1039,e=.8*Math.min(r,n),i=H()((e/t).toFixed(2)),o=Math.min(i,1);a(V,o),a(U,!1)},500)}},K={isCalculatingZoom:!1,previewZoom:1},J={namespaced:!0,actions:Y,mutations:X,state:K},Q="EXPORT_PDF",tt="PREVIEW",et=(n={},Object(I["a"])(n,Q,$),Object(I["a"])(n,tt,J),n),at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"export-import-items"},[a("a",{staticClass:"btn btn-link text-dark btn-sm mb-0 mr-1",class:{disabled:!t.hasGeneratedItems},attrs:{title:"Exportar configurações de artefatos para arquivo .json"},on:{click:t.exportGeneratedItems}},[a("i",{staticClass:"fa fa-cloud-download mr-1"}),t._v(" Exportar\n  ")]),t._m(0),a("input",{staticClass:"d-none m-0",attrs:{type:"file",id:"importItems",multiple:!1,lang:"pt-br",accept:".json",hidden:""},on:{change:function(e){return t.importItems(e.target)}}}),a("a",{staticClass:"btn btn-link text-danger btn-sm mb-0",attrs:{hidden:!t.hasGeneratedItems},on:{click:t.removeGeneratedItems}},[a("i",{staticClass:"fa fa-trash mr-2"}),t._v(" Destruir artefatos\n  ")])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"btn btn-link text-dark btn-sm mb-0 mr-1",attrs:{for:"importItems",title:"Importar configurações de artefatos de arquivo .json"}},[a("i",{staticClass:"fa fa-cloud-upload mr-1"}),t._v(" Importar\n  ")])}],nt={name:"ExportImportItems",computed:Object(i["a"])({},Object(s["c"])(["hasGeneratedItems"])),methods:Object(i["a"])({},Object(s["b"])(["exportGeneratedItems","importGeneratedItems"]),Object(s["d"])({removeGeneratedItems:"REMOVE_GENERATED_ITEMS"}),{importItems:function(t){var e=t.files;this.importGeneratedItems(e[0])}})},it=nt,ot=(a("11da"),Object(b["a"])(it,at,rt,!1,null,"da2d4530",null)),st=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"generated-items-list"},t._l(t.generatedItems,function(e,r){return a("figure",{key:r,staticClass:"figure generated-item",attrs:{title:e.name}},[a("figcaption",{staticClass:"figure-caption text-truncate"},[a("small",[t._v(t._s(e.name))])]),a("div",{staticClass:"figure-image"},[a("img",{staticClass:"img-fluid rounded",attrs:{src:e.image.url,alt:e.image.name}}),a("div",{staticClass:"figure-controls"},[a("a",{staticClass:"text-dark mb-1",on:{click:function(a){return t.download(e.image)}}},[t._m(0,!0)]),a("a",{staticClass:"text-dark mb-1",on:{click:function(e){return t.editGeneratedItem(r)}}},[t._m(1,!0)]),a("a",{staticClass:"text-dark",on:{click:function(e){return t.removeGeneratedItem(r)}}},[t._m(2,!0)])])])])}),0)},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",[a("i",{staticClass:"fa fa-cloud-download"}),t._v(" Baixar")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",[a("i",{staticClass:"fa fa-edit"}),t._v(" Modificar")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",[a("i",{staticClass:"fa fa-trash"}),t._v(" Destruir")])}],lt=(a("7f7f"),a("a481"),a("a4bb")),ut=a.n(lt),dt={name:"GeneratedItemsList",props:{generatedItems:Object},computed:{hasGeneratedItems:function(){return!!ut()(this.generatedItems).length}},methods:Object(i["a"])({},Object(s["b"])(["editGeneratedItem"]),Object(s["d"])({removeGeneratedItem:"REMOVE_GENERATED_ITEM"}),{download:function(t){var e=document.createElement("a");e.href=t.url.replace("image/jpeg","image/octet-stream"),e.download=t.name,e.click()}})},pt=dt,ft=(a("c1fd"),Object(b["a"])(pt,ct,mt,!1,null,"5acf19bc",null)),gt=ft.exports,vt={name:"GeneratedItems",components:{ExportImportItems:st,GeneratedItemsList:gt},computed:Object(i["a"])({},Object(s["e"])(["generatedItems"]),Object(w["b"])(Q,["format","orientation"]),Object(s["c"])(["hasGeneratedItems"])),methods:Object(i["a"])({},Object(s["b"])(Q,["exportToPdf"]))},bt=vt,ht=(a("5332"),Object(b["a"])(bt,x,y,!1,null,"6245d163",null)),Ct=ht.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-back-options"},[a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemType",text:"Categoria"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemType,expression:"itemType"}],staticClass:"custom-select",attrs:{id:"itemType"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.itemType=e.target.multiple?a:a[0]}}},t._l(t.types,function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])}),0)],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemName",text:"Tipo (opcional)"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemSubType,expression:"itemSubType"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Espada longa",id:"itemSubType"},domProps:{value:t.itemSubType},on:{input:function(e){e.target.composing||(t.itemSubType=e.target.value)}}})],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemRarity",text:"Raridade"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemRarity,expression:"itemRarity"}],staticClass:"custom-select",attrs:{id:"itemRarity"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.itemRarity=e.target.multiple?a:a[0]}}},t._l(t.rarities,function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])}),0)],1),a("div",{staticClass:"form-group"},[a("SwitchComponent",{attrs:{text:"Requer sintonização?",id:"itemRequiresAttunement"},model:{value:t.itemRequiresAttunement,callback:function(e){t.itemRequiresAttunement=e},expression:"itemRequiresAttunement"}})],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemTextSize",text:"Tamanho dos textos"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemTextSize,expression:"itemTextSize"}],staticClass:"custom-select",attrs:{id:"itemTextSize"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.itemTextSize=e.target.multiple?a:a[0]}}},t._l(t.textSizes,function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)],1),a("div",{staticClass:"form-group"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("Label",{attrs:{for:"itemDescription",text:"Descrição"}}),a("span",{staticClass:"badge badge-light"},[t._v("\n        "+t._s(t.itemDescription.length)+"/500\n      ")])],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.itemDescription,expression:"itemDescription"}],staticClass:"form-control",attrs:{id:"itemDescription",maxlength:"500",placeholder:"Esta espada antiga foi feita com um metal raro retirado de um meteorito...",rows:"4"},domProps:{value:t.itemDescription},on:{input:function(e){e.target.composing||(t.itemDescription=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("Label",{attrs:{for:"itemEffects",text:"Efeitos/Mecânicas"}})],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.itemEffects,expression:"itemEffects"}],staticClass:"form-control effect-description",attrs:{id:"itemEffects",placeholder:"Com este artefato, o usuário pode...",rows:"4"},domProps:{value:t.itemEffects},on:{input:function(e){e.target.composing||(t.itemEffects=e.target.value)}}})]),t._m(0)])},xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"text-dark",attrs:{href:"https://commonmark.org/help/",target:"_blank"}},[a("i",{staticClass:"fa fa-external-link"}),t._v(" Guia de formatação de texto\n  ")])}],yt=function(t,e){var a=e._c;return a("label",{staticClass:"text-dark font-weight-bold",attrs:{for:e.props.for}},[e._v("\n    "+e._s(e.props.text)+"\n")])},wt=[],It={name:"Label",functional:!0,props:{text:{type:String,required:!0},for:{type:String}}},Ot=It,kt=Object(b["a"])(Ot,yt,wt,!0,null,null,null),jt=kt.exports,Et=function(t,e){var a=e._c;return a("div",{staticClass:"custom-control custom-switch"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:e.props.id},domProps:{checked:e.props.value},on:{change:function(t){return e.listeners.input(t.target.checked)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:e.props.id}},[e._v("\n    "+e._s(e.props.text)+"\n  ")])])},St=[],Tt={name:"SwitchComponent",functional:!0,props:{id:{type:String,required:!0},text:{type:String,default:function(){return""}},value:{type:Boolean,required:!0}}},Pt=Tt,zt=Object(b["a"])(Pt,Et,St,!0,null,null,null),Nt=zt.exports,Rt={name:"ItemBackOptions",components:{Label:jt,SwitchComponent:Nt},computed:Object(i["a"])({},Object(s["e"])(["item","rarities","textSizes","types"]),Object(w["b"])({itemDescription:"item.description",itemEffects:"item.effects",itemRarity:"item.rarity",itemRequiresAttunement:"item.requiresAttunement",itemTextSize:"item.textSize",itemType:"item.type",itemSubType:"item.subType",itemShowLevels:"item.showLevels"}))},At=Rt,Gt=(a("11a5"),Object(b["a"])(At,_t,xt,!1,null,"0035f1da",null)),Mt=Gt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-cover-options"},[a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemTitleNameSize",text:"Tamanho do nome"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemTitleNameSize,expression:"itemTitleNameSize"}],staticClass:"custom-select",attrs:{id:"itemTitleNameSize"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.itemTitleNameSize=e.target.multiple?a:a[0]}}},t._l(t.titleNameSizes,function(e,r){return a("option",{key:r,domProps:{value:e}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"background",text:"Imagem"}}),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"backgroundFile",multiple:!1,lang:"pt-br",accept:".jpg,.jpeg,.png,.gif"},on:{change:function(e){return t.changeBackground(e.target)}}}),a("label",{staticClass:"custom-file-label text-truncate",attrs:{for:"backgroundFile"}},[a("small",{staticClass:"text-muted"},[t._v("\n          "+t._s(t.item.file?t.item.file.name:"Selecione uma imagem aqui")+"\n        ")])])])],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{text:"Enquadramento"}}),a("ImageFraming",{model:{value:t.itemBackgroundSize,callback:function(e){t.itemBackgroundSize=e},expression:"itemBackgroundSize"}})],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{text:"Posicionamento"}}),a("div",{staticClass:"row",attrs:{id:"background-axis"}},[a("div",{staticClass:"col"},[a("small",{staticClass:"text-center"},[t._v("Horizontal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemBackgroundPositionX,expression:"itemBackgroundPositionX"}],staticClass:"custom-range",attrs:{type:"range",min:"0",max:"100",step:"1",id:"background-horizontal-axis"},domProps:{value:t.itemBackgroundPositionX},on:{__r:function(e){t.itemBackgroundPositionX=e.target.value}}})]),a("div",{staticClass:"col"},[a("small",{staticClass:"text-center"},[t._v("Vertical")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemBackgroundPositionY,expression:"itemBackgroundPositionY"}],staticClass:"custom-range",attrs:{type:"range",min:"0",max:"100",step:"1",id:"background-vertical-axis"},domProps:{value:t.itemBackgroundPositionY},on:{__r:function(e){t.itemBackgroundPositionY=e.target.value}}})])])],1),a("div",{staticClass:"form-group"},[a("Label",{attrs:{for:"itemBackgroundColor",text:"Cor de fundo"}}),a("ChromeColorPicker",{staticClass:"w-100",attrs:{value:t.itemBackgroundColor},on:{input:t.changeBackgroundColor}})],1)])},Bt=[],Dt=a("c345"),Ft=function(t,e){var a=e._c;return a("div",{staticClass:"btn-group-toggle flex-column w-100"},e._l(e.props.options,function(t){return a("label",{key:t.type,staticClass:"btn btn-light text-left w-100 mb-1 d-flex align-items-center",class:{active:e.props.value===t.type}},[a("input",{attrs:{type:"radio",name:"framing",id:"framing-"+t.type,autocomplete:"off"},domProps:{checked:e.props.value===t.type,value:t.type},on:{change:function(t){return e.listeners.input(t.target.value)}}}),a("i",{staticClass:"fa mr-1",class:e.props.value===t.type?"fa-check-square":"fa-square-o"}),a("small",[e._v(e._s(t.description))])])}),0)},Lt=[],$t={name:"ImageFraming",functional:!0,props:{value:String,options:{type:Array,default:function(){return[{name:"Cortar",type:"cover",description:"Preencher o quadro com a imagem."},{name:"Encaixar",type:"contain",description:"Encaixar a imagem dentro do quadro."}]}}}},Zt=$t,Ht=Object(b["a"])(Zt,Ft,Lt,!0,null,null,null),Ut=Ht.exports,Vt={name:"ItemCoverOptions",components:{ImageFraming:Ut,Label:jt,ChromeColorPicker:Dt["Chrome"]},computed:Object(i["a"])({},Object(s["e"])(["item","rarities","titleNameSizes","types"]),Object(w["b"])({itemBackgroundColor:"item.backgroundColor",itemBackgroundPositionX:"item.backgroundPositionX",itemBackgroundPositionY:"item.backgroundPositionY",itemBackgroundSize:"item.backgroundSize",itemTitleNameSize:"item.titleNameSize"})),methods:Object(i["a"])({},Object(s["b"])(["setItemFile"]),{changeBackground:function(t){var e=t.files;this.setItemFile(e[0])},changeBackgroundColor:function(t){var e=this,a=t.hex8;window.BCTimeoutId&&clearTimeout(window.BCTimeoutId),window.BCTimeoutId=setTimeout(function(){e.itemBackgroundColor=a},300,!1)}})},Xt=Vt,Wt=(a("028f"),Object(b["a"])(Xt,qt,Bt,!1,null,"338b9f96",null)),Yt=Wt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"generate-options d-sm-flex align-items-sm-center justify-content-sm-center"},[a("div",{staticClass:"form-inline mr-md-1"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemName,expression:"itemName"}],staticClass:"form-control mx-md-1 my-1",attrs:{type:"text",id:"itemName"},domProps:{value:t.itemName},on:{input:function(e){e.target.composing||(t.itemName=e.target.value)}}})]),a("button",{staticClass:"btn text-left construct-artifact",class:t.constructButtonClasses,attrs:{type:"button",disabled:t.isCalculatingZoom},on:{click:t.generateArtifact}},[a("i",{staticClass:"ra ra-fairy-wand mr-2"}),t.item.uuid?a("strong",[t._v("Reconstruir artefato")]):a("strong",[t._v("Criar artefato")])])])},Jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"text-light my-1 mx-md-1",attrs:{for:"itemName"}},[a("strong",[t._v("Nome do artefato:")])])}],Qt={name:"ItemName",computed:Object(i["a"])({},Object(s["e"])(["item"]),Object(s["e"])(tt,["isCalculatingZoom"]),Object(w["b"])({itemName:"item.name"}),{constructButtonClasses:function(){return{"btn-secondary":!this.item.uuid,"btn-success":!!this.item.uuid}}}),methods:{generateArtifact:function(){this.$emit("generate")}}},te=Qt,ee=Object(b["a"])(te,Kt,Jt,!1,null,null,null),ae=ee.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"options shadow"},[a("div",{staticClass:"options-header "},[a("h5",{staticClass:"text-dark border-bottom m-0 pb-2"},[t._v(t._s(t.title))])]),a("div",{staticClass:"options-content"},[t._t("default")],2)])},ne=[],ie={name:"ItemOptions",props:{title:String}},oe=ie,se=(a("37a1"),Object(b["a"])(oe,re,ne,!1,null,"2223f9be",null)),ce=se.exports,me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"itemPreview",staticClass:"item-preview"},[r("div",{staticClass:"editor-center"},[r("img",{staticClass:"loading",attrs:{hidden:!t.isCalculatingZoom,src:a("6d2d"),alt:"Calculando preview..."}}),r("div",{ref:"itemCards",staticClass:"item-cards",style:{zoom:t.previewZoom},attrs:{hidden:t.isCalculatingZoom}},[r("ItemCard",[r("BackgroundCard",{attrs:{item:t.item}})],1),r("ItemCard",[r("FrontCard",{attrs:{item:t.item}})],1)],1),t._t("default")],2)])},le=[],ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-card"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-name"},[t._v(t._s(t.item.name))]),a("div",{staticClass:"header-details",class:t.item.textSize.value+"-text"},[a("div",{staticClass:"type-rarity-attunement"},[a("span",[t._v(t._s(t.item.type)),t.item.subType?a("span",[t._v(" ("+t._s(t.item.subType)+")")]):t._e(),t._v(", ")]),a("span",[t._v(t._s(t.item.rarity)+" ")]),t.item.requiresAttunement?a("span",[t._v("(requer sintonização)")]):t._e()]),a("div",{staticClass:"description",domProps:{innerHTML:t._s(t.itemDescription)}})])]),a("div",{staticClass:"body"},[t._m(0),a("div",{staticClass:"body-content",class:t.item.textSize.value+"-text"},[a("div",{staticClass:"effect"},[a("div",{staticClass:"effect-description",domProps:{innerHTML:t._s(t.itemEffects)}})])])])])},de=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-heading"},[a("span",[t._v("Mecânicas")])])}],pe=a("0e54"),fe=a.n(pe),ge={name:"BackgroundCard",props:{item:{type:Object}},computed:{itemDescription:function(){return this.getMarkdownText(this.item.description)},itemEffects:function(){return this.getMarkdownText(this.item.effects)}},methods:{getMarkdownText:function(t){return fe()(t,{sanitize:!0})}}},ve=ge,be=(a("684a"),Object(b["a"])(ve,ue,de,!1,null,"50373d0a",null)),he=be.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"front-card",style:t.customStyles},[a("div",{staticClass:"ribbon"},[a("p",{staticClass:"ribbon-text",class:t.item.titleNameSize.value+"-text"},[t._v(t._s(t.item.name))])])])},_e=[],xe={name:"FrontCard",props:{item:{type:Object}},computed:{customStyles:function(){var t="",e=this.item,a=e.file,r=e.backgroundColor,n=e.backgroundSize,i=e.backgroundPositionX,o=e.backgroundPositionY;return a&&(t=a.dataUrl),{"background-color":r,"background-image":"url(".concat(t,")"),"background-position":"".concat(i,"% ").concat(o,"% !important"),"background-size":n}}}},ye=xe,we=(a("b19e"),Object(b["a"])(ye,Ce,_e,!1,null,"b290d8c4",null)),Ie=we.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-card"},[t._t("default")],2)},ke=[],je={name:"ItemCard"},Ee=je,Se=(a("191d"),Object(b["a"])(Ee,Oe,ke,!1,null,"712eeab5",null)),Te=Se.exports,Pe={name:"ItemPreview",components:{BackgroundCard:he,FrontCard:Ie,ItemCard:Te},computed:Object(i["a"])({},Object(s["e"])(["item"]),Object(s["e"])(tt,["isCalculatingZoom","previewZoom"])),mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.updateZoom),this.updateZoom()})},beforeDestroy:function(){window.removeEventListener("resize",this.updateZoom)},methods:Object(i["a"])({},Object(s["b"])(tt,["updatePreviewZoom"]),{updateZoom:function(){this.updatePreviewZoom(this.$refs.itemPreview)}})},ze=Pe,Ne=(a("80de"),Object(b["a"])(ze,me,le,!1,null,"a75130e8",null)),Re=Ne.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tour",{attrs:{name:"basicTour",callbacks:t.tourCallbacks,steps:t.tourSteps,options:t.tourOptions}})},Ge=[],Me={name:"TourGuide",data:function(){return{localStorageStopKey:"ARTIFACTS_GENERATOR_TOUR_GUIDE",tourCallbacks:{onStop:this.persistStopAction,onNextStep:this.onNextStep},tourOptions:{useKeyboardNavigation:!0,labels:{buttonSkip:"Sair do guia",buttonPrevious:"Anterior",buttonNext:"Próximo",buttonStop:"Finalizar"}},tourSteps:[{target:".basic-tour",content:"\n            Seja bem vindo à <strong>Forja Mística</strong>!<br/><br/>\n            Se é a sua primeira vez aqui, clique em próximo para seguir o nosso guia.\n          ",params:{placement:"bottom"}},{target:".artifacts-generator",content:"A criação é composta de 4 etapas:\n            mecânicas, aparência, nome e materialização",params:{placement:"bottom"}},{target:".options-left",content:"<strong>Propriedades</strong><br/><br/>\n            Nesta aba você poderá adicionar e modificar as propriedades\n            e mecânicas do seu artefato.<br/><br/>\n            Práticando: modifique as mecânicas como achar melhor.",params:{placement:"right"}},{target:".editor-center",content:"<strong>Pré-visualização</strong><br/><br/>\n            Este é um vislumbre de como seu artefato ficará quando for\n            materializado (impresso).",params:{placement:"right"}},{target:".options-right",content:"<strong>Aparência</strong><br/><br/>\n            Aqui você irá escolher, posicionar e enquadrar a\n            imagem do seu artefato. Você também pode trocar a cor de fundo se\n            quiser ;)<br/><br/>\n            Práticando: selecione uma imagem e modifique como achar melhor.",params:{placement:"left"}},{target:".generate-options",content:"<strong>Nome e Criação</strong><br/><br/>\n            Aqui você poderá dar um nome para o seu artefato e após isto\n            criá-lo.<br/><br/>\n            Práticando: Dê um nome para o artefato e clique em\n            <strong>Criar artefato</strong>."},{target:".generated-items-list",content:"<strong>Lista de artefatos criados</strong><br/><br/>\n            Você pode <strong>remover</strong>,\n            <strong>alterar</strong> e até mesmo <strong>baixar</strong>\n            o artefato em formato de imagem.",params:{highlight:!0,placement:"left"}},{target:".export-to-pdf",content:"<strong>Materializar artefatos</strong><br/><br/>\n            Quando tudo estiver pronto, basta Materializar seus artefatos!<br/>\n            (Eles serão unidos em um arquivo pronto para impressão)",params:{highlight:!0,placement:"top"}},{target:".export-import-items",content:"Para finalizar, você também pode exportar seu progresso\n            e importá-lo depois utilizando estes controles.",params:{highlight:!0}}]}},mounted:function(){var t=localStorage.getItem(this.localStorageStopKey);"done"!==t&&this.$tours["basicTour"].start()},methods:{persistStopAction:function(){localStorage.setItem(this.localStorageStopKey,"done")},onNextStep:function(t){7===t&&this.persistStopAction()}}},qe=Me,Be=Object(b["a"])(qe,Ae,Ge,!1,null,null,null),De=Be.exports,Fe={name:"ItemGenerator",components:{NavBrand:_,GeneratedItems:Ct,ItemBackOptions:Mt,ItemCoverOptions:Yt,ItemName:ae,ItemOptions:ce,ItemPreview:Re,TourGuide:De},computed:Object(i["a"])({},Object(s["e"])({iteName:"item.name"})),methods:Object(i["a"])({},Object(s["b"])(["setGeneratedItem"]),{generateArtifact:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.itemName){t.next=3;break}return swal({title:"Dê um nome para o seu artefato!",text:"Nomes definem o propósito e dão forma as coisas, mesmo que de uma maneira abstrata...",icon:"warning"}),t.abrupt("return");case 3:return e=this.$refs.itemPreview.$refs.itemCards,t.next=6,this.$html2canvas(e);case 6:a=t.sent,this.setGeneratedItem({name:"".concat(this.itemName,".jpg"),url:a.toDataURL("image/jpeg"),width:a.width,height:a.height});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),startTour:function(){this.$tours["basicTour"].start()}})},Le=Fe,$e=(a("f1af"),Object(b["a"])(Le,d,p,!1,null,"5d0bb28d",null)),Ze=$e.exports,He=a("f499"),Ue=a.n(He),Ve=a("795b"),Xe=a.n(Ve);function We(t){var e=new FileReader;return new Xe.a(function(a,r){e.onerror=function(){e.abort(),r(new Error("Error parsing file"))},e.onload=function(e){var r=e.target.result;a({dataUrl:r,name:t.name,size:t.size,type:t.type})},e.readAsDataURL(t)})}function Ye(t){var e=new FileReader;return new Xe.a(function(a,r){e.onerror=function(){e.abort(),r(new Error("Error parsing file"))},e.onload=function(t){var e=t.target.result;try{a(JSON.parse(e))}catch(n){r(n)}},e.readAsText(t)})}function Ke(t,e){var a=encodeURIComponent(Ue()(t,null,2)),r="data:text/json;charset=utf-8,"+a,n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",e+".json"),document.body.appendChild(n),n.click(),n.remove()}var Je,Qe=a("c64e"),ta=a.n(Qe),ea="MERGE_IMPORTED_ITEMS",aa="SET_GENERATED_ITEM",ra="REMOVE_GENERATED_ITEM",na="REMOVE_GENERATED_ITEMS",ia="RESET_ITEM_DATA",oa="SET_CALCULATING_ZOOM",sa="SET_ITEM_FILE",ca="SET_ITEM_DATA";function ma(t,e){o["a"].set(t,"item",Object(i["a"])({},e))}var la=(Je={},Object(I["a"])(Je,oa,function(t,e){t.isCalculatingZoom=e}),Object(I["a"])(Je,ea,function(t,e){t.generatedItems=Object(i["a"])({},t.generatedItems,e)}),Object(I["a"])(Je,ra,function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,a){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,swal({title:"Deseja destruir este artefato?",text:"Todos seus componentes serão perdidos para sempre!",icon:"warning",dangerMode:!0,buttons:["Cancelar","Descartar artefato"]});case 2:r=t.sent,r&&o["a"].delete(e.generatedItems,a);case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()),Object(I["a"])(Je,na,function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,swal({title:"Deseja destruir todos os artefatos?",text:"Isso pode abalar o equilibrio mágico da região!",icon:"warning",dangerMode:!0,buttons:["Cancelar","Destruir artefatos"]});case 2:a=t.sent,a&&(e.generatedItems={});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),Object(I["a"])(Je,ia,function(t){ma(t,F)}),Object(I["a"])(Je,aa,function(t,e){var a=t.item.uuid||ta()();o["a"].set(t.generatedItems,a,Object(i["a"])({},t.item,{uuid:a,image:e}))}),Object(I["a"])(Je,ca,function(t,e){ma(t,e)}),Object(I["a"])(Je,sa,function(t,e){o["a"].set(t.item,"file",e)}),Object(I["a"])(Je,"updateField",function(t,e){clearTimeout(t.timeoutId),t.timeoutId=setTimeout(function(){return Object(w["c"])(t,e)},100)}),Je),ua={editGeneratedItem:function(t,e){var a=t.commit,r=t.state.generatedItems;a(ca,r[e])},importGeneratedItems:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,a){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Ye(a);case 3:n=t.sent,r(ea,n);case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),exportGeneratedItems:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var a,r,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state.generatedItems,r=Object(i["a"])({},a),t.next=4,swal({title:"Deseja incluir as imagens na exportação?",text:"Isso pode incrementar drásticamente o tamanho do arquivo!",icon:"warning",buttons:["Exportar apenas textos","Exportar imagens"]});case 4:if(n=t.sent,!n)for(o in r)delete r[o]["file"],delete r[o]["image"];Ke(r,"artefatos");case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),setGeneratedItem:function(t,e){var a=t.commit;a(aa,e),a(ia)},setItemFile:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,a){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,We(a);case 3:n=t.sent,r(sa,n);case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},da={getField:w["a"],hasGeneratedItems:function(t,e){var a=e.itemsCount;return a>0},itemsCount:function(t){var e=t.generatedItems;return ut()(e).length}},pa={generatedItems:{},item:Object(i["a"])({},F),rarities:P,timeoutId:null,textSizes:B,titleNameSizes:q,types:z};o["a"].use(s["a"]);var fa=new s["a"].Store({state:pa,actions:ua,getters:da,modules:et,mutations:la});a("abe2");o["a"].use(u.a),o["a"].use(m.a),o["a"].config.productionTip=!1,new o["a"]({store:fa,computed:Object(i["a"])({},Object(s["c"])(["hasGeneratedItems"])),mounted:function(){window.addEventListener("beforeunload",this.beforeUnloadHandler)},methods:{beforeUnloadHandler:function(t){if(this.hasGeneratedItems){var e="\n          Existem itens na lista!\n          Sair da página pode apagar seus artefatos.\n        ";return t.returnValue=e,e}}},render:function(t){return t(Ze)}}).$mount("#app")},"635f":function(t,e,a){},"684a":function(t,e,a){"use strict";var r=a("028a"),n=a.n(r);n.a},"6d2d":function(t,e,a){t.exports=a.p+"img/loading.4b38e7df.png"},"7e94":function(t,e,a){},"80de":function(t,e,a){"use strict";var r=a("00df"),n=a.n(r);n.a},8123:function(t,e,a){},"83cb":function(t,e,a){},a7bb:function(t,e,a){t.exports=a.p+"img/logo-brand.cbbee048.png"},abe2:function(t,e,a){},aea5:function(t,e,a){},b19e:function(t,e,a){"use strict";var r=a("aea5"),n=a.n(r);n.a},b953:function(t,e,a){},bee8:function(t,e,a){},c1fd:function(t,e,a){"use strict";var r=a("83cb"),n=a.n(r);n.a},c6b2:function(t,e,a){},f1af:function(t,e,a){"use strict";var r=a("bee8"),n=a.n(r);n.a}});
//# sourceMappingURL=app.4cbc058d.js.map